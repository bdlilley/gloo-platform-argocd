# charts - each key is a helm chart install
charts:

  # cert-manager for issuing certs
  cert-manager:
    repo: https://charts.jetstack.io
    revision: v1.9.1
    chart: cert-manager
    namespace: cert-manager
    values:
      installCRDs: true

  # a cert-manager clusterIssuer named "selfsigned"
  selfsigned:
    path: charts/cluster-issuer
    namespace: kube-system
    syncPolicy:
      syncOptions: [] # dont create namespace
  
  # the aws iam for service accounts webhook
  aws-iam:
    path: charts/aws-identity-webhook
    namespace: pod-identity-webhook
    
  # bookinfo sample apps
  bookinfo:
    path: charts/bookinfo
    namespace: bookinfo

  # meshctl:
  #   namespace: gloo-mesh
  #   plugin: meshctl

  gloo-mgmt:
    repo: https://storage.googleapis.com/gloo-mesh-enterprise/gloo-mesh-enterprise
    chart: gloo-mesh-enterprise
    namespace: gloo-mesh
    # revision is taken from .Values.gloo.version
  #   # manually running meshctl cluster register --kubecontext="default" --remote-context="default" --version "${GLOO_VERSION}" cluster1 after this step

  gloo-agent:
    repo: https://storage.googleapis.com/gloo-mesh-enterprise/gloo-mesh-agent
    chart: gloo-mesh-agent
    namespace: gloo-mesh
    # revision is taken from .Values.gloo.version
    syncPolicy:
      syncOptions: [] # dont create namespace
    values:
      cluster: cluster1
      relay:
        clientTlsSecret:
          name: gloo-mesh-agent-cluster1-tls-cert
        serverAddress: "10.0.20.10:9900"

  istio-lcm:
    path: charts/istio-lcm
    namespace: gloo-mesh
    syncPolicy:
      syncOptions: [] # dont create namespace